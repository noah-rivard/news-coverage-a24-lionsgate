{
  "version": 3,
  "sources": ["../src/popup.ts"],
  "sourcesContent": ["function setText(id: string, text: string) {\n  const el = document.getElementById(id);\n  if (el) el.textContent = text;\n}\n\nfunction setStatus(text: string, color = \"inherit\") {\n  const el = document.getElementById(\"status\");\n  if (el) {\n    el.textContent = text;\n    el.style.color = color;\n  }\n}\n\nfunction renderSendStatus(status?: { status: string; error?: string; duplicate_of?: string }) {\n  if (!status) return;\n  if (status.status === \"ok\") {\n    setStatus(\"Auto-sent to pipeline.\", \"green\");\n  } else if (status.status === \"duplicate\") {\n    setStatus(\"Already processed (duplicate).\", \"orange\");\n  } else if (status.status === \"error\") {\n    setStatus(status.error || \"Send failed.\", \"red\");\n  }\n}\n\nfunction loadLatest() {\n  chrome.runtime.sendMessage({ type: \"GET_LATEST_ARTICLE\" }, (resp) => {\n    const article = resp?.article;\n    if (!article) {\n      setStatus(\"No article scraped yet. Right-click a page or link and choose Capture.\", \"red\");\n      return;\n    }\n    setText(\"title\", article.title || \"(untitled)\");\n    setText(\"source\", article.source || \"Unknown\");\n    setText(\"published\", article.published_at || \"Unknown\");\n    renderSendStatus(resp?.sendStatus);\n    if (!resp?.sendStatus) {\n      setStatus(\"Ready to send.\");\n    }\n  });\n}\n\nfunction bindSend() {\n  const btn = document.getElementById(\"send\");\n  if (!btn) return;\n  btn.addEventListener(\"click\", () => {\n    setStatus(\"Sending...\");\n    chrome.runtime.sendMessage({ type: \"SEND_TO_INGEST\" }, (resp) => {\n      if (resp?.status === \"ok\") {\n        setStatus(\"Stored via pipeline.\", \"green\");\n      } else if (resp?.status === \"duplicate\") {\n        setStatus(\"Already processed (duplicate).\", \"orange\");\n      } else {\n        setStatus(resp?.error || \"Send failed.\", \"red\");\n      }\n    });\n  });\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  loadLatest();\n  bindSend();\n});\n\n// Listen for background capture failures (e.g., permission denied) and surface them.\nchrome.runtime.onMessage.addListener((message) => {\n  if (message?.type === \"CAPTURE_FAILED\") {\n    setStatus(message.reason || \"Capture failed.\", \"red\");\n  }\n  if (message?.type === \"SEND_RESULT\") {\n    renderSendStatus(message);\n  }\n});\n"],
  "mappings": ";;;AAAA,WAAS,QAAQ,IAAY,MAAc;AACzC,UAAM,KAAK,SAAS,eAAe,EAAE;AACrC,QAAI,GAAI,IAAG,cAAc;AAAA,EAC3B;AAEA,WAAS,UAAU,MAAc,QAAQ,WAAW;AAClD,UAAM,KAAK,SAAS,eAAe,QAAQ;AAC3C,QAAI,IAAI;AACN,SAAG,cAAc;AACjB,SAAG,MAAM,QAAQ;AAAA,IACnB;AAAA,EACF;AAEA,WAAS,iBAAiB,QAAoE;AAC5F,QAAI,CAAC,OAAQ;AACb,QAAI,OAAO,WAAW,MAAM;AAC1B,gBAAU,0BAA0B,OAAO;AAAA,IAC7C,WAAW,OAAO,WAAW,aAAa;AACxC,gBAAU,kCAAkC,QAAQ;AAAA,IACtD,WAAW,OAAO,WAAW,SAAS;AACpC,gBAAU,OAAO,SAAS,gBAAgB,KAAK;AAAA,IACjD;AAAA,EACF;AAEA,WAAS,aAAa;AACpB,WAAO,QAAQ,YAAY,EAAE,MAAM,qBAAqB,GAAG,CAAC,SAAS;AACnE,YAAM,UAAU,MAAM;AACtB,UAAI,CAAC,SAAS;AACZ,kBAAU,0EAA0E,KAAK;AACzF;AAAA,MACF;AACA,cAAQ,SAAS,QAAQ,SAAS,YAAY;AAC9C,cAAQ,UAAU,QAAQ,UAAU,SAAS;AAC7C,cAAQ,aAAa,QAAQ,gBAAgB,SAAS;AACtD,uBAAiB,MAAM,UAAU;AACjC,UAAI,CAAC,MAAM,YAAY;AACrB,kBAAU,gBAAgB;AAAA,MAC5B;AAAA,IACF,CAAC;AAAA,EACH;AAEA,WAAS,WAAW;AAClB,UAAM,MAAM,SAAS,eAAe,MAAM;AAC1C,QAAI,CAAC,IAAK;AACV,QAAI,iBAAiB,SAAS,MAAM;AAClC,gBAAU,YAAY;AACtB,aAAO,QAAQ,YAAY,EAAE,MAAM,iBAAiB,GAAG,CAAC,SAAS;AAC/D,YAAI,MAAM,WAAW,MAAM;AACzB,oBAAU,wBAAwB,OAAO;AAAA,QAC3C,WAAW,MAAM,WAAW,aAAa;AACvC,oBAAU,kCAAkC,QAAQ;AAAA,QACtD,OAAO;AACL,oBAAU,MAAM,SAAS,gBAAgB,KAAK;AAAA,QAChD;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAAA,EACH;AAEA,WAAS,iBAAiB,oBAAoB,MAAM;AAClD,eAAW;AACX,aAAS;AAAA,EACX,CAAC;AAGD,SAAO,QAAQ,UAAU,YAAY,CAAC,YAAY;AAChD,QAAI,SAAS,SAAS,kBAAkB;AACtC,gBAAU,QAAQ,UAAU,mBAAmB,KAAK;AAAA,IACtD;AACA,QAAI,SAAS,SAAS,eAAe;AACnC,uBAAiB,OAAO;AAAA,IAC1B;AAAA,EACF,CAAC;",
  "names": []
}
